{"version":3,"sources":["types.ts","reducer.ts","components/WineItem/WineItem.tsx","components/WineQuestion/WineQuestion.tsx","App.tsx","index.tsx"],"names":["ActionTypeEnum","CompareEnum","initialState","wineList","questions","question","field","compare","OLDER","score","round","reducer","state","action","type","FETCH_VINTAGES_SUCCESS","payload","UPDATE_ROUND","WineItem","vintage","onClick","showInfo","className","src","photo","url","alt","alcohol","year","categorySimple","find","e","wineInfo","id","WineQuestion","App","useReducer","dispatch","useState","setShowInfo","a","Array","fill","map","_","i","vintPromises","vintPromise","fetch","then","res","json","push","Promise","all","vintages","vintagesObj","reduce","acc","vint","onClickHandle","firstWine","secondWine","alert","useEffect","document","title","fetchWine","Object","keys","length","newRound","key","Number","sort","Math","random","slice","console","log","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.51c901fb.chunk.js","sourcesContent":["export interface IVintage {\n  id: number;\n  photo: {\n    name: string;\n    url: string;\n  }\n  alcohol: number;\n  sugar: number;\n  year: number;\n  categorySimple: string[];\n}\n\nexport enum ActionTypeEnum {\n  FETCH_VINTAGES_SUCCESS = 'FETCH_VINTAGES_SUCCESS',\n  UPDATE_ROUND = 'UPDATE_ROUND',\n}\n\nexport interface IAction {\n  type: ActionTypeEnum;\n  payload?: any;\n}\n\nexport enum CompareEnum {\n  YOUNGER = '>',\n  OLDER = '<'\n}\n\nexport interface IQuestion {\n  question: string;\n  field: string;\n  compare: CompareEnum;\n}\n\nexport interface IRootState {\n  wineList: Record<number, IVintage>;\n  questions: IQuestion[]\n  score: number,\n  round: Array<number>;\n}","import { ActionTypeEnum, IAction, IRootState, CompareEnum } from \"./types\";\n\nexport const initialState: IRootState = {\n  wineList: {},\n  questions: [{ question: 'Which wine is older?', field: 'year', compare: CompareEnum.OLDER }],\n  score: 0,\n  round: [],\n};\n\nexport function reducer(state: IRootState, action: IAction): IRootState {\n  switch (action.type) {\n    case ActionTypeEnum.FETCH_VINTAGES_SUCCESS:\n      return {\n        ...state,\n        wineList: action.payload ? action.payload : {},\n      }\n    case ActionTypeEnum.UPDATE_ROUND:\n      return {\n        ...state,\n        round: action.payload ? action.payload : [],\n      }\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\nimport { IVintage } from \"../../types\";\nimport \"./WineItem.css\";\n\ninterface Props {\n  vintage: IVintage;\n  showInfo: boolean;\n  onClick(id: number): void;\n}\n\nconst wineInfo = (vintage: IVintage) => (\n  <div>\n    <p>Alcohol is: {vintage.alcohol}</p>\n    <p>Sugar is: {vintage.alcohol}</p>\n    <p>Year: {vintage.year}</p>\n    <p>Wine type: {vintage.categorySimple.find(e => e)}</p>\n  </div>\n)\n\nexport const WineItem: React.FC<Props> = ({ vintage, onClick, showInfo }) => (\n  <div className=\"wine-item\">\n    <div className=\"wine-details\">\n      <img src={vintage.photo.url} alt=\"\" />\n      {showInfo && wineInfo(vintage)}\n    </div>\n    <button className=\"btn wine-vote\" onClick={() => onClick(vintage.id)}>Vote this Wine</button>\n  </div>)\n","import React from 'react';\nimport './WineQuestion.css';\nimport { IQuestion } from '../../types';\n\ninterface Props {\n  question: IQuestion\n}\nexport const WineQuestion: React.FC<Props> = ({ question }) => {\n\n  return (\n    <div>\n      <h1 className=\"wine-question\">{question.question}</h1>\n    </div>\n  );\n}\n\n","import React, { useReducer, useEffect, useState } from 'react';\nimport './App.css';\nimport { reducer, initialState } from './reducer';\nimport { IVintage, ActionTypeEnum, CompareEnum } from './types';\nimport { WineItem, WineQuestion } from './components';\n\nconst App: React.FC = (): React.ReactElement => {\n  const [state, dispatch] = useReducer(reducer, initialState)\n  const [showInfo, setShowInfo] = useState(false)\n\n  useEffect(() => {\n    document.title = \"WineQuiz\";\n    fetchWine();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (Object.keys(state.wineList).length) {\n      const objKeysArray: Array<number> = Object.keys(state.wineList).map(key =>\n        Number(key)\n      );\n\n      const newRound: number[] = objKeysArray\n        .sort(() => 0.5 - Math.random())\n        .slice(0, 2);\n\n      dispatch({ type: ActionTypeEnum.UPDATE_ROUND, payload: newRound });\n    }\n  }, [state.wineList]);\n\n  async function fetchWine(): Promise<void> {\n    const a: any = new Array(13).fill(1).map((_, i) => i + 1);\n    const vintPromises: Promise<IVintage>[] = [];\n\n    for (const i of a) {\n      const vintPromise: Promise<IVintage> = fetch(\n        `https://app.gustos.life/en/api/v1/vintage/${i}`\n      ).then(res => res.json());\n      vintPromises.push(vintPromise);\n    }\n\n    const vintages: IVintage[] = await Promise.all(vintPromises);\n    const vintagesObj: Record<number, IVintage> = vintages.reduce(\n      (acc: Record<number, IVintage>, vint: IVintage) => {\n        acc[vint.id] = vint;\n        return acc;\n      },\n      {}\n    );\n    dispatch({\n      type: ActionTypeEnum.FETCH_VINTAGES_SUCCESS,\n      payload: vintagesObj\n    });\n  }\n\n  function onClickHandle(id: number): void {\n    const firstWine: IVintage = state.wineList[state.round[0]]\n    const secondWine: IVintage = state.wineList[state.round[1]]\n\n    if (state.questions[0].compare === CompareEnum.OLDER) {\n      const field: string = state.questions[0].field;\n      // @ts-ignore\n      const winner: number = firstWine[field] <= secondWine[field] ? firstWine.id : secondWine.id;\n\n      if (id === winner) {\n        setShowInfo(true);\n        alert('Corrent')\n      } else {\n        alert('Lost')\n      }\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      <WineQuestion question={state.questions[0]} />\n      {Object.keys(state.wineList).length > 0 && state.round.length > 0 &&\n        (<div className=\"quiz-section\">\n          <WineItem showInfo={showInfo} vintage={state.wineList[state.round[0]]} onClick={onClickHandle} />\n          <h1>VS</h1>\n          <WineItem showInfo={showInfo} vintage={state.wineList[state.round[1]]} onClick={onClickHandle} />\n        </div>)}\n  { console.log(state) }\n    </div >\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}