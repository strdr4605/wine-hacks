{"version":3,"sources":["types.ts","components/WineItem/WineItem.tsx","reducer.ts","App.tsx","index.tsx"],"names":["ActionTypeEnum","CompareEnum","WineItem","vintage","onClick","className","src","photo","url","alt","alcohol","year","name","initialState","wineList","questions","score","round","reducer","state","action","type","FETCH_VINTAGES_SUCCESS","payload","UPDATE_ROUND","App","useReducer","dispatch","a","Array","fill","map","_","i","vintPromises","vintPromise","fetch","then","res","json","push","Promise","all","vintages","vintagesObj","reduce","acc","vint","id","onClickHandle","alert","useEffect","fetchWine","Object","keys","length","newRound","key","Number","sort","Math","random","slice","console","log","ReactDOM","render","document","getElementById"],"mappings":"wKAYYA,EAUAC,E,8DCbCC,G,YAA4B,SAAC,GAAD,IACvCC,EADuC,EACvCA,QACAC,EAFuC,EAEvCA,QAFuC,OAIvC,yBAAKC,UAAU,aACb,yBAAKA,UAAU,gBACb,yBAAKC,IAAKH,EAAQI,MAAMC,IAAKC,IAAI,KACjC,0CAAgBN,EAAQO,SACxB,wCAAcP,EAAQO,SACtB,oCAAUP,EAAQQ,OAEpB,4BACEN,UAAU,gBACVD,QAAO,8GAAE,kBAAYA,EAAQD,EAAQI,MAAMK,UAF7C,qB,0kBDRQZ,K,gDAAAA,E,6BAAAA,M,cAUAC,K,YAAAA,E,WAAAA,M,KEpBL,IAAMY,EAA2B,CACtCC,SAAU,GACVC,UAAW,GACXC,MAAO,EACPC,MAAO,IAGF,SAASC,EAAQC,EAAmBC,GACzC,OAAQA,EAAOC,MACb,KAAKrB,EAAesB,uBAClB,OAAO,EAAP,GACKH,EADL,CAEEL,SAAUM,EAAOG,QAAUH,EAAOG,QAAU,KAEhD,KAAKvB,EAAewB,aAClB,OAAO,EAAP,GACKL,EADL,CAEEF,MAAOG,EAAOG,QAAUH,EAAOG,QAAU,KAE7C,QACE,OAAOJ,GChBb,IAwEeM,EAxEO,WAA2B,IAAD,EACfC,qBAAWR,EAASL,GADL,mBACvCM,EADuC,KAChCQ,EADgC,iDAsB9C,iBAAAC,EAAA,6BAAAA,EAAA,sDAIE,IAHMA,EAAS,IAAIC,MAAM,IAAIC,KAAK,GAAGC,KAAI,SAACC,EAAGC,GAAJ,OAAUA,EAAI,KACjDC,EAAoC,GAF5C,4BAIE,EAAgBN,EAAhB,+CAAWK,EAAQ,QACXE,EAAiCC,MAAM,6CAAD,OACGH,IAC7CI,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAClBL,EAAaM,KAAKL,GARtB,wPAWqCM,QAAQC,IAAIR,GAXjD,QAWQS,EAXR,OAYQC,EAAwCD,EAASE,QACrD,SAACC,EAA+BC,GAE9B,OADAD,EAAIC,EAAKC,IAAMD,EACRD,IAET,IAEFnB,EAAS,CACPN,KAAMrB,EAAesB,uBACrBC,QAASqB,IArBb,4EAtB8C,sBA+C9C,SAASK,EAAcrC,GACrBsC,MAAM,8BAAD,OAA+BtC,IAGtC,OAhDAuC,qBAAU,YAHoC,mCAI5CC,KAEC,IAEHD,qBAAU,WACR,GAAIE,OAAOC,KAAKnC,EAAML,UAAUyC,OAAQ,CACtC,IAIMC,EAJ8BH,OAAOC,KAAKnC,EAAML,UAAUiB,KAAI,SAAA0B,GAAG,OACrEC,OAAOD,MAINE,MAAK,iBAAM,GAAMC,KAAKC,YACtBC,MAAM,EAAG,GAEZnC,EAAS,CAAEN,KAAMrB,EAAewB,aAAcD,QAASiC,OAExD,CAACrC,EAAML,WAgCR,yBAAKT,UAAU,OACb,wBAAIA,UAAU,iBAAd,uBACCgD,OAAOC,KAAKnC,EAAML,UAAUyC,OAAS,GAAKpC,EAAMF,MAAMsC,OAAS,GAC9D,yBAAKlD,UAAU,gBACb,kBAAC,EAAD,CACEF,QAASgB,EAAML,SAASK,EAAMF,MAAM,IACpCb,QAAS6C,IAEX,kCACA,kBAAC,EAAD,CACE9C,QAASgB,EAAML,SAASK,EAAMF,MAAM,IACpCb,QAAS6C,KAIdc,QAAQC,IAAI7C,KCrEnB8C,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.0dfc310b.chunk.js","sourcesContent":["export interface IVintage {\n  id: number;\n  photo: {\n    name: string;\n    url: string;\n  }\n  alcohol: number;\n  sugar: number;\n  year: number;\n  categorySimple: string[];\n}\n\nexport enum ActionTypeEnum {\n  FETCH_VINTAGES_SUCCESS = 'FETCH_VINTAGES_SUCCESS',\n  UPDATE_ROUND = 'UPDATE_ROUND',\n}\n\nexport interface IAction {\n  type: ActionTypeEnum;\n  payload?: any;\n}\n\nexport enum CompareEnum {\n  GREATER = '>',\n  LOWER = '<'\n}\n\nexport interface IQuestion {\n  question: string;\n  field: string;\n  compare: CompareEnum;\n}\n\nexport interface IRootState {\n  wineList: Record<number, IVintage>;\n  questions: IQuestion[]\n  score: number,\n  round: Array<number>;\n}","import React from \"react\";\nimport { IVintage } from \"../../types\";\nimport \"./WineItem.css\";\n\ninterface Props {\n  vintage: IVintage;\n  onClick(name: string): void;\n}\n\nexport const WineItem: React.FC<Props> = ({\n  vintage,\n  onClick\n}: Props): React.ReactElement => (\n  <div className=\"wine-item\">\n    <div className=\"wine-details\">\n      <img src={vintage.photo.url} alt=\"\" />\n      <p>Alcohol is: {vintage.alcohol}</p>\n      <p>Sugar is: {vintage.alcohol}</p>\n      <p>Year: {vintage.year}</p>\n    </div>\n    <button\n      className=\"btn wine-vote\"\n      onClick={(): void => onClick(vintage.photo.name)}\n    >\n      Vote this Wine\n    </button>\n  </div>\n);\n","import { ActionTypeEnum, IAction, IRootState } from \"./types\";\n\nexport const initialState: IRootState = {\n  wineList: {},\n  questions: [],\n  score: 0,\n  round: [],\n};\n\nexport function reducer(state: IRootState, action: IAction): IRootState {\n  switch (action.type) {\n    case ActionTypeEnum.FETCH_VINTAGES_SUCCESS:\n      return {\n        ...state,\n        wineList: action.payload ? action.payload : {}\n      };\n    case ActionTypeEnum.UPDATE_ROUND:\n      return {\n        ...state,\n        round: action.payload ? action.payload : []\n      };\n    default:\n      return state;\n  }\n}\n","import React, { useEffect, useReducer } from \"react\";\nimport \"./App.css\";\nimport { WineItem } from \"./components\";\nimport { initialState, reducer } from \"./reducer\";\nimport { ActionTypeEnum, IVintage } from \"./types\";\n\nconst App: React.FC = (): React.ReactElement => {\n  const [state, dispatch]: any = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    fetchWine();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (Object.keys(state.wineList).length) {\n      const objKeysArray: Array<number> = Object.keys(state.wineList).map(key =>\n        Number(key)\n      );\n\n      const newRound: number[] = objKeysArray\n        .sort(() => 0.5 - Math.random())\n        .slice(0, 2);\n\n      dispatch({ type: ActionTypeEnum.UPDATE_ROUND, payload: newRound });\n    }\n  }, [state.wineList]);\n\n  async function fetchWine(): Promise<void> {\n    const a: any = new Array(10).fill(1).map((_, i) => i + 1);\n    const vintPromises: Promise<IVintage>[] = [];\n\n    for (const i of a) {\n      const vintPromise: Promise<IVintage> = fetch(\n        `https://app.gustos.life/en/api/v1/vintage/${i}`\n      ).then(res => res.json());\n      vintPromises.push(vintPromise);\n    }\n\n    const vintages: IVintage[] = await Promise.all(vintPromises);\n    const vintagesObj: Record<number, IVintage> = vintages.reduce(\n      (acc: Record<number, IVintage>, vint: IVintage) => {\n        acc[vint.id] = vint;\n        return acc;\n      },\n      {}\n    );\n    dispatch({\n      type: ActionTypeEnum.FETCH_VINTAGES_SUCCESS,\n      payload: vintagesObj\n    });\n  }\n\n  function onClickHandle(name: string): void {\n    alert(`You clicked on wine, named ${name}`);\n  }\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"wine-question\">Question ----- ????</h1>\n      {Object.keys(state.wineList).length > 0 && state.round.length > 0 && (\n        <div className=\"quiz-section\">\n          <WineItem\n            vintage={state.wineList[state.round[0]]}\n            onClick={onClickHandle}\n          />\n          <h1>VS</h1>\n          <WineItem\n            vintage={state.wineList[state.round[1]]}\n            onClick={onClickHandle}\n          />\n        </div>\n      )}\n      {console.log(state)}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}