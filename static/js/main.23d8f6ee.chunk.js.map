{"version":3,"sources":["types.ts","components/WineItem/WineItem.tsx","components/WineQuestion/WineQuestion.tsx","components/Footer/Footer.tsx","reducer.ts","App.tsx","index.tsx"],"names":["ActionTypeEnum","CompareEnum","WineItem","vintage","onClick","showInfo","className","src","photo","url","alt","alcohol","year","categorySimple","find","e","wineInfo","id","WineQuestion","question","Footer","href","initialState","wineList","questions","require","score","round","reducer","state","action","type","FETCH_VINTAGES_SUCCESS","payload","UPDATE_ROUND","App","useReducer","dispatch","useState","setShowInfo","firstIndex","secondIndex","players","setPlayers","Object","keys","length","map","key","Number","sort","Math","random","slice","newRound","floor","a","Array","fill","_","i","vintPromises","vintPromise","fetch","then","res","json","push","Promise","all","vintages","vintagesObj","reduce","acc","vint","onClickHandle","firstWine","secondWine","compare","MORE","field","document","body","style","background","setTimeout","useEffect","title","fetchWine","console","log","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.23d8f6ee.chunk.js","sourcesContent":["export interface IVintage {\n  id: number;\n  photo: {\n    name: string;\n    url: string;\n  }\n  alcohol: number;\n  sugar: number;\n  year: number;\n  categorySimple: string[];\n}\n\nexport enum ActionTypeEnum {\n  FETCH_VINTAGES_SUCCESS = 'FETCH_VINTAGES_SUCCESS',\n  UPDATE_ROUND = 'UPDATE_ROUND',\n}\n\nexport interface IAction {\n  type: ActionTypeEnum;\n  payload?: any;\n}\n\nexport enum CompareEnum {\n  MORE = '>',\n  LESS = '<'\n}\n\nexport interface IQuestion {\n  question: string;\n  field: string;\n  compare: CompareEnum;\n}\n\nexport interface IRound {\n  question?: IQuestion;\n  players?: number[];\n}\n\nexport interface IRootState {\n  wineList: Record<number, IVintage>;\n  questions: IQuestion[]\n  score: number,\n  round: IRound;\n}","import React from \"react\";\nimport { IVintage } from \"../../types\";\nimport \"./WineItem.css\";\n\ninterface Props {\n  vintage: IVintage;\n  showInfo: boolean;\n  onClick(id: number): void;\n}\n\nconst wineInfo = (vintage: IVintage) => (\n  <div>\n    <p>Alcohol is: <strong>{vintage.alcohol}</strong></p>\n    <p>Sugar is:  <strong>{vintage.alcohol}</strong></p>\n    <p>Year:  <strong>{vintage.year}</strong></p>\n    <p>Wine type:  <strong>{vintage.categorySimple.find(e => e)}</strong></p>\n  </div>\n)\n\nexport const WineItem: React.FC<Props> = ({ vintage, onClick, showInfo }) => (\n  <div className=\"wine-item\">\n    <div className=\"wine-details\">\n      <img src={vintage.photo.url} alt=\"\" />\n      {showInfo && wineInfo(vintage)}\n    </div>\n    <button className=\"btn wine-vote\" onClick={() => onClick(vintage.id)}>Vote this Wine</button>\n  </div>)\n","import React from 'react';\nimport './WineQuestion.css';\nimport { IQuestion } from '../../types';\n\ninterface Props {\n  question: IQuestion\n}\nexport const WineQuestion: React.FC<Props> = ({ question }) => {\n\n  return (\n    <div>\n      <h1 className=\"wine-question\">{question.question}</h1>\n    </div>\n  );\n}\n\n","import React from \"react\";\nimport \"./Footer.css\";\n\nexport const Footer: React.FC<{}> = () => (\n  <footer>\n    <div>\n      <a href=\"https://github.com/strdr4605/wine-hacks\">WineQuiz</a>&nbsp; Made\n      by&nbsp;\n      <a href=\"https://github.com/strdr4605\">Dragoș Străinu,</a>&nbsp;\n      <a href=\"https://github.com/CapceleaCristian\">Capcelea Cristian,</a>&nbsp;\n      <a href=\"https://github.com/Andreeii\">Țurcanu Andrei</a>&nbsp; at&nbsp;\n      <a href=\"https://www.facebook.com/events/2390607614550967/\">\n        Wine Hacks 2.0\n      </a>\n    </div>\n  </footer>\n);\n","import { ActionTypeEnum, IAction, IRootState, CompareEnum } from \"./types\";\nconst wineJSON = require('./wineQuestions.json');\n\nexport const initialState: IRootState = {\n  wineList: {},\n  questions: wineJSON,\n  score: 0,\n  round: {},\n};\n\nexport function reducer(state: IRootState, action: IAction): IRootState {\n  switch (action.type) {\n    case ActionTypeEnum.FETCH_VINTAGES_SUCCESS:\n      return {\n        ...state,\n        wineList: action.payload ? action.payload : {},\n      }\n    case ActionTypeEnum.UPDATE_ROUND:\n      return {\n        ...state,\n        round: action.payload ? action.payload : {},\n      }\n    default:\n      return state;\n  }\n}\n","import React, { useEffect, useReducer, useState } from \"react\";\nimport \"./App.css\";\nimport { Footer, WineItem, WineQuestion } from \"./components\";\nimport { initialState, reducer } from \"./reducer\";\nimport {\n  ActionTypeEnum,\n  CompareEnum,\n  IQuestion,\n  IRound,\n  IVintage\n} from \"./types\";\n\nconst App: React.FC = (): React.ReactElement => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [showInfo, setShowInfo] = useState(false);\n  const [players, setPlayers] = useState({\n    firstIndex: 1,\n    secondIndex: 2\n  });\n\n  useEffect(() => {\n    document.title = \"WineQuiz\";\n    fetchWine();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    round();\n    // eslint-disable-next-line\n  }, [state.wineList]);\n\n  function round() {\n    if (Object.keys(state.wineList).length) {\n      const objKeysArray: Array<number> = Object.keys(state.wineList).map(key =>\n        Number(key)\n      );\n\n      const players: number[] = objKeysArray\n        .sort(() => 0.5 - Math.random())\n        .slice(0, 2);\n\n      const randomQuestion: IQuestion =\n        state.questions[Math.floor(Math.random() * state.questions.length)];\n      const newRound: IRound = { question: randomQuestion, players };\n      dispatch({ type: ActionTypeEnum.UPDATE_ROUND, payload: newRound });\n      setPlayers({\n        firstIndex: players[0],\n        secondIndex: players[1]\n      });\n    }\n  }\n\n  async function fetchWine(): Promise<void> {\n    const a: any = new Array(13).fill(1).map((_, i) => i + 1);\n    const vintPromises: Promise<IVintage>[] = [];\n\n    for (const i of a) {\n      const vintPromise: Promise<IVintage> = fetch(\n        `https://app.gustos.life/en/api/v1/vintage/${i}`\n      ).then(res => res.json());\n      vintPromises.push(vintPromise);\n    }\n\n    const vintages: IVintage[] = await Promise.all(vintPromises);\n    const vintagesObj: Record<number, IVintage> = vintages.reduce(\n      (acc: Record<number, IVintage>, vint: IVintage) => {\n        acc[vint.id] = vint;\n        return acc;\n      },\n      {}\n    );\n    dispatch({\n      type: ActionTypeEnum.FETCH_VINTAGES_SUCCESS,\n      payload: vintagesObj\n    });\n  }\n\n  function onClickHandle(id: number): void {\n    const firstWine: IVintage = state.wineList[players.firstIndex];\n    const secondWine: IVintage = state.wineList[players.secondIndex];\n\n    if (state.questions[0].compare === CompareEnum.MORE) {\n      const field: string = state.questions[0].field;\n      const winner: number =\n        // @ts-ignore\n        firstWine[field] <= secondWine[field] ? firstWine.id : secondWine.id;\n\n      if (id === winner) {\n        setShowInfo(true);\n        document.body.style.background = \"#39ff14\";\n        setTimeout(() => {\n          round(); setShowInfo(false);\n          document.body.style.background = \"#fff\";\n        }, 2000);\n      } else {\n        document.body.style.background = \"#FF073A\";\n        setTimeout(() => {\n          round(); setShowInfo(false);\n          document.body.style.background = \"#fff\";\n        }, 2000);\n\n      }\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      {state.round.question && <WineQuestion question={state.round.question} />}\n      {Object.keys(state.wineList).length > 0 &&\n        state.round.players &&\n        state.round.players.length > 0 && (\n          <div className=\"quiz-section\">\n            <WineItem\n              showInfo={showInfo}\n              vintage={state.wineList[players.firstIndex]}\n              onClick={onClickHandle}\n            />\n            <h1>VS</h1>\n            <WineItem\n              showInfo={showInfo}\n              vintage={state.wineList[players.secondIndex]}\n              onClick={onClickHandle}\n            />\n          </div>\n        )}\n      {console.log(state)}\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}