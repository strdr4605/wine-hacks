{"version":3,"sources":["components/WineItem/WineItem.tsx","types.ts","components/WineQuestion/WineQuestion.tsx","components/Footer/Footer.tsx","reducer.ts","App.tsx","index.tsx"],"names":["ActionTypeEnum","CompareEnum","WineItem","vintage","onClick","showInfo","className","src","photo","url","alt","kebabCaseName","name","split","changeCase","titleCase","getName","alcohol","year","categorySimple","find","e","wineInfo","disabled","id","WineQuestion","question","Footer","href","initialState","wineList","questions","require","score","round","reducer","state","action","type","FETCH_VINTAGES_SUCCESS","payload","UPDATE_ROUND","INCREMENT_SCORE","RESET_SCORE","App","useReducer","dispatch","useState","setShowInfo","firstIndex","secondIndex","players","setPlayers","useDebouncedCallback","document","body","style","background","debouncedCallback","Object","keys","length","map","key","Number","sort","Math","random","slice","newRound","floor","a","Array","fill","_","i","vintPromises","vintPromise","fetch","then","res","json","push","Promise","all","vintages","vintagesObj","reduce","acc","vint","onClickHandle","firstWine","secondWine","compare","MORE","field","console","log","LESS","useEffect","title","fetchWine","ReactDOM","render","getElementById"],"mappings":"yuBAmCO,ICvBKA,EAYAC,EDWCC,EAA4B,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,QAASC,EAArB,EAAqBA,SAArB,OACvC,yBAAKC,UAAU,aACb,yBAAKA,UAAU,gBACb,yBAAKC,IAAKJ,EAAQK,MAAMC,IAAKC,IAAI,KACjC,2BAXN,SAAiBP,GACf,IAAMQ,EAAwBR,EAAQK,MAClCL,EAAQK,MAAMI,KAAKC,MAAM,KAAK,GAC9B,UACJ,OAAOC,IAAWC,UAAUJ,GAOpBK,CAAQb,IACXE,GA7BU,SAACF,GAAD,OACf,6BACE,0CACc,gCAASA,EAAQc,UAE/B,wCACY,gCAASd,EAAQc,UAE7B,oCACQ,gCAASd,EAAQe,OAEzB,yCACa,gCAASf,EAAQgB,eAAeC,MAAK,SAAAC,GAAC,OAAIA,QAiBxCC,CAASnB,IAExB,4BACEoB,SAAUlB,EACVC,UAAU,gBACVF,QAAO,8GAAE,kBAAMA,EAAQD,EAAQqB,QAHjC,oBEnCSC,G,MAAgC,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAE9C,OACE,6BACE,wBAAIpB,UAAU,iBAAiBoB,EAASA,aCRjCC,G,MAAuB,kBAClC,gCACE,6BACE,uBAAGC,KAAK,2CAAR,YADF,mBAGE,uBAAGA,KAAK,gCAAR,6BAHF,OAIE,uBAAGA,KAAK,uCAAR,sBAJF,OAKE,uBAAGA,KAAK,+BAAR,uBALF,cAME,uBAAGA,KAAK,qDAAR,sB,2kBFCM5B,K,gDAAAA,E,4BAAAA,E,kCAAAA,E,2BAAAA,M,cAYAC,K,SAAAA,E,UAAAA,M,KGvBZ,IAEa4B,EAA2B,CACtCC,SAAU,GACVC,UAJeC,EAAQ,IAKvBC,MAAO,EACPC,MAAO,IAGF,SAASC,EAAQC,EAAmBC,GACzC,OAAQA,EAAOC,MACb,KAAKtC,EAAeuC,uBAClB,OAAO,EAAP,GACKH,EADL,CAEEN,SAAUO,EAAOG,QAAUH,EAAOG,QAAU,KAEhD,KAAKxC,EAAeyC,aAClB,OAAO,EAAP,GACKL,EADL,CAEEF,MAAOG,EAAOG,QAAUH,EAAOG,QAAU,KAE7C,KAAKxC,EAAe0C,gBAClB,OAAO,EAAP,GACKN,EADL,CAEEH,MAAOG,EAAMH,MAAQ,IAEzB,KAAKjC,EAAe2C,YAClB,OAAO,EAAP,GACKP,EADL,CAEEH,MAAO,IAEX,QACE,OAAOG,GCpBb,IA0KeQ,EA1KO,WAA2B,IAAD,EACpBC,qBAAWV,EAASN,GADA,mBACvCO,EADuC,KAChCU,EADgC,OAEdC,oBAAS,GAFK,mBAEvC1C,EAFuC,KAE7B2C,EAF6B,OAGhBD,mBAAS,CACrCE,WAAY,EACZC,YAAa,IAL+B,mBAGvCC,EAHuC,KAG9BC,EAH8B,OAQlBC,aAAqB,WAC/CnB,IACAc,GAAY,GACZM,SAASC,KAAKC,MAAMC,WAAa,SAChC,KAJIC,EARuC,oBAyB9C,SAASxB,IACP,GAAIyB,OAAOC,KAAKxB,EAAMN,UAAU+B,OAAQ,CACtC,IAIMV,EAJ8BQ,OAAOC,KAAKxB,EAAMN,UAAUgC,KAAI,SAAAC,GAAG,OACrEC,OAAOD,MAINE,MAAK,iBAAM,GAAMC,KAAKC,YACtBC,MAAM,EAAG,GAINC,EAAmB,CAAE3C,SADzBU,EAAML,UAAUmC,KAAKI,MAAMJ,KAAKC,SAAW/B,EAAML,UAAU8B,SACRV,WACrDL,EAAS,CAAER,KAAMtC,EAAeyC,aAAcD,QAAS6B,IACvDjB,EAAW,CACTH,WAAYE,EAAQ,GACpBD,YAAaC,EAAQ,MAzCmB,4CA8C9C,iBAAAoB,EAAA,6BAAAA,EAAA,sDAIE,IAHMA,EAAS,IAAIC,MAAM,IAAIC,KAAK,GAAGX,KAAI,SAACY,EAAGC,GAAJ,OAAUA,EAAI,KACjDC,EAAoC,GAF5C,4BAIE,EAAgBL,EAAhB,+CAAWI,EAAQ,QACXE,EAAiCC,MAAM,6CAAD,OACGH,IAC7CI,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAClBL,EAAaM,KAAKL,GARtB,wPAWqCM,QAAQC,IAAIR,GAXjD,QAWQS,EAXR,OAYQC,EAAwCD,EAASE,QACrD,SAACC,EAA+BC,GAE9B,OADAD,EAAIC,EAAKjE,IAAMiE,EACRD,IAET,IAEF1C,EAAS,CACPR,KAAMtC,EAAeuC,uBACrBC,QAAS8C,IArBb,4EA9C8C,sBAuE9C,SAASI,EAAclE,GACrB,IAAMmE,EAAsBvD,EAAMN,SAASqB,EAAQF,YAC7C2C,EAAuBxD,EAAMN,SAASqB,EAAQD,aACpD,GACEd,EAAMF,MAAMR,UACZU,EAAMF,MAAMR,SAASmE,UAAY5F,EAAY6F,KAC7C,CACA,IAAMC,EAAgB3D,EAAMF,MAAMR,SAASqE,MAE3CC,QAAQC,IAAIF,GAWRvE,KAVU,SAAVuE,EAGAJ,EAAUI,IAAUH,EAAWG,GAASJ,EAAUnE,GAAKoE,EAAWpE,GAIlEmE,EAAUI,IAAUH,EAAWG,GAASJ,EAAUnE,GAAKoE,EAAWpE,KAIpEsB,EAAS,CACPR,KAAMtC,EAAe0C,kBAEvBY,SAASC,KAAKC,MAAMC,WAAa,UACjCC,MAEAV,GAAY,GACZF,EAAS,CACPR,KAAMtC,EAAe2C,cAEvBW,SAASC,KAAKC,MAAMC,WAAa,UACjCC,UAEG,GACLtB,EAAMF,MAAMR,UACZU,EAAMF,MAAMR,SAASmE,UAAY5F,EAAYiG,KAC7C,CACA,IAAMH,EAAgB3D,EAAMF,MAAMR,SAC9BU,EAAMF,MAAMR,SAASqE,MACrB,OAEJC,QAAQC,IAAIF,GAWRvE,KAVU,SAAVuE,EAGAJ,EAAUI,IAAUH,EAAWG,GAASJ,EAAUnE,GAAKoE,EAAWpE,GAIlEmE,EAAUI,IAAUH,EAAWG,GAASJ,EAAUnE,GAAKoE,EAAWpE,KAIpEsB,EAAS,CACPR,KAAMtC,EAAe0C,kBAEvBY,SAASC,KAAKC,MAAMC,WAAa,UACjCC,MAEAV,GAAY,GACZF,EAAS,CACPR,KAAMtC,EAAe2C,cAEvBW,SAASC,KAAKC,MAAMC,WAAa,UACjCC,MAKN,OA/HAyC,qBAAU,WACR7C,SAAS8C,MAAQ,WAf2B,mCAgB5CC,KAEC,IAEHF,qBAAU,WACRjE,MAEC,CAACE,EAAMN,WAuHR,yBAAKxB,UAAU,OACZ8B,EAAMF,MAAMR,UAAY,kBAAC,EAAD,CAAcA,SAAUU,EAAMF,MAAMR,WAC7D,yBAAKpB,UAAU,gBAAf,eACc,8BAAO8B,EAAMH,QAE1B0B,OAAOC,KAAKxB,EAAMN,UAAU+B,OAAS,GACpCzB,EAAMF,MAAMiB,SACZf,EAAMF,MAAMiB,QAAQU,OAAS,GAC3B,yBAAKvD,UAAU,gBACb,kBAAC,EAAD,CACED,SAAUA,EACVF,QAASiC,EAAMN,SAASqB,EAAQF,YAChC7C,QAASsF,IAEX,kCACA,kBAAC,EAAD,CACErF,SAAUA,EACVF,QAASiC,EAAMN,SAASqB,EAAQD,aAChC9C,QAASsF,KAIhBM,QAAQC,IAAI7D,GACb,kBAAC,EAAD,QC9KNkE,IAASC,OAAO,kBAAC,EAAD,MAASjD,SAASkD,eAAe,W","file":"static/js/main.25ebeea1.chunk.js","sourcesContent":["import changeCase from \"change-case\";\nimport React from \"react\";\nimport { IVintage } from \"../../types\";\nimport \"./WineItem.css\";\n\ninterface Props {\n  vintage: IVintage;\n  showInfo: boolean;\n  onClick(id: number): void;\n}\n\nconst wineInfo = (vintage: IVintage) => (\n  <div>\n    <p>\n      Alcohol is: <strong>{vintage.alcohol}</strong>\n    </p>\n    <p>\n      Sugar is: <strong>{vintage.alcohol}</strong>\n    </p>\n    <p>\n      Year: <strong>{vintage.year}</strong>\n    </p>\n    <p>\n      Wine type: <strong>{vintage.categorySimple.find(e => e)}</strong>\n    </p>\n  </div>\n);\n\nfunction getName(vintage: IVintage) {\n  const kebabCaseName: string = vintage.photo\n    ? vintage.photo.name.split(\".\")[0]\n    : \"No Name\";\n  return changeCase.titleCase(kebabCaseName);\n}\n\nexport const WineItem: React.FC<Props> = ({ vintage, onClick, showInfo }) => (\n  <div className=\"wine-item\">\n    <div className=\"wine-details\">\n      <img src={vintage.photo.url} alt=\"\" />\n      <p>{getName(vintage)}</p>\n      {showInfo && wineInfo(vintage)}\n    </div>\n    <button\n      disabled={showInfo}\n      className=\"btn wine-vote\"\n      onClick={() => onClick(vintage.id)}\n    >\n      Vote this Wine\n    </button>\n  </div>\n);\n","export interface IVintage {\n  id: number;\n  photo: {\n    name: string;\n    url: string;\n  }\n  alcohol: number;\n  sugar: number;\n  year: number;\n  categorySimple: string[];\n}\n\nexport enum ActionTypeEnum {\n  FETCH_VINTAGES_SUCCESS = 'FETCH_VINTAGES_SUCCESS',\n  UPDATE_ROUND = 'UPDATE_ROUND',\n  INCREMENT_SCORE = \"INCREMENT_SCORE\",\n  RESET_SCORE = \"RESET_SCORE\"\n}\n\nexport interface IAction {\n  type: ActionTypeEnum;\n  payload?: any;\n}\n\nexport enum CompareEnum {\n  MORE = '>',\n  LESS = '<'\n}\n\nexport interface IQuestion {\n  question: string;\n  field: string;\n  compare: CompareEnum;\n}\n\nexport interface IRound {\n  question?: IQuestion;\n  players?: number[];\n}\n\nexport interface IRootState {\n  wineList: Record<number, IVintage>;\n  questions: IQuestion[]\n  score: number,\n  round: IRound;\n}","import React from 'react';\nimport './WineQuestion.css';\nimport { IQuestion } from '../../types';\n\ninterface Props {\n  question: IQuestion\n}\nexport const WineQuestion: React.FC<Props> = ({ question }) => {\n\n  return (\n    <div>\n      <h1 className=\"wine-question\">{question.question}</h1>\n    </div>\n  );\n}\n\n","import React from \"react\";\nimport \"./Footer.css\";\n\nexport const Footer: React.FC<{}> = () => (\n  <footer>\n    <div>\n      <a href=\"https://github.com/strdr4605/wine-hacks\">WineQuiz</a>&nbsp; Made\n      by&nbsp;\n      <a href=\"https://github.com/strdr4605\">Dragoș Străinu,</a>&nbsp;\n      <a href=\"https://github.com/CapceleaCristian\">Capcelea Cristian,</a>&nbsp;\n      <a href=\"https://github.com/Andreeii\">Țurcanu Andrei</a>&nbsp; at&nbsp;\n      <a href=\"https://www.facebook.com/events/2390607614550967/\">\n        Wine Hacks 2.0\n      </a>\n    </div>\n  </footer>\n);\n","import { ActionTypeEnum, IAction, IRootState, CompareEnum } from \"./types\";\nconst wineJSON = require('./wineQuestions.json');\n\nexport const initialState: IRootState = {\n  wineList: {},\n  questions: wineJSON,\n  score: 0,\n  round: {},\n};\n\nexport function reducer(state: IRootState, action: IAction): IRootState {\n  switch (action.type) {\n    case ActionTypeEnum.FETCH_VINTAGES_SUCCESS:\n      return {\n        ...state,\n        wineList: action.payload ? action.payload : {},\n      }\n    case ActionTypeEnum.UPDATE_ROUND:\n      return {\n        ...state,\n        round: action.payload ? action.payload : {},\n      }\n    case ActionTypeEnum.INCREMENT_SCORE:\n      return {\n        ...state,\n        score: state.score + 1,\n      }\n    case ActionTypeEnum.RESET_SCORE:\n      return {\n        ...state,\n        score: 0,\n      }\n    default:\n      return state;\n  }\n}\n","import React, { useEffect, useReducer, useState } from \"react\";\nimport { useDebouncedCallback } from \"use-debounce\";\nimport \"./App.css\";\nimport { Footer, WineItem, WineQuestion } from \"./components\";\nimport { initialState, reducer } from \"./reducer\";\nimport {\n  ActionTypeEnum,\n  CompareEnum,\n  IQuestion,\n  IRound,\n  IVintage\n} from \"./types\";\n\nconst App: React.FC = (): React.ReactElement => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const [showInfo, setShowInfo] = useState(false);\n  const [players, setPlayers] = useState({\n    firstIndex: 1,\n    secondIndex: 2\n  });\n\n  const [debouncedCallback] = useDebouncedCallback(() => {\n    round();\n    setShowInfo(false);\n    document.body.style.background = \"#fff\";\n  }, 3000);\n\n  useEffect(() => {\n    document.title = \"WineQuiz\";\n    fetchWine();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    round();\n    // eslint-disable-next-line\n  }, [state.wineList]);\n\n  function round() {\n    if (Object.keys(state.wineList).length) {\n      const objKeysArray: Array<number> = Object.keys(state.wineList).map(key =>\n        Number(key)\n      );\n\n      const players: number[] = objKeysArray\n        .sort(() => 0.5 - Math.random())\n        .slice(0, 2);\n\n      const randomQuestion: IQuestion =\n        state.questions[Math.floor(Math.random() * state.questions.length)];\n      const newRound: IRound = { question: randomQuestion, players };\n      dispatch({ type: ActionTypeEnum.UPDATE_ROUND, payload: newRound });\n      setPlayers({\n        firstIndex: players[0],\n        secondIndex: players[1]\n      });\n    }\n  }\n\n  async function fetchWine(): Promise<void> {\n    const a: any = new Array(13).fill(1).map((_, i) => i + 1);\n    const vintPromises: Promise<IVintage>[] = [];\n\n    for (const i of a) {\n      const vintPromise: Promise<IVintage> = fetch(\n        `https://app.gustos.life/en/api/v1/vintage/${i}`\n      ).then(res => res.json());\n      vintPromises.push(vintPromise);\n    }\n\n    const vintages: IVintage[] = await Promise.all(vintPromises);\n    const vintagesObj: Record<number, IVintage> = vintages.reduce(\n      (acc: Record<number, IVintage>, vint: IVintage) => {\n        acc[vint.id] = vint;\n        return acc;\n      },\n      {}\n    );\n    dispatch({\n      type: ActionTypeEnum.FETCH_VINTAGES_SUCCESS,\n      payload: vintagesObj\n    });\n  }\n\n  function onClickHandle(id: number): void {\n    const firstWine: IVintage = state.wineList[players.firstIndex];\n    const secondWine: IVintage = state.wineList[players.secondIndex];\n    if (\n      state.round.question &&\n      state.round.question.compare === CompareEnum.MORE\n    ) {\n      const field: string = state.round.question.field;\n      let winner: number;\n      console.log(field);\n      if (field === \"year\") {\n        winner =\n          // @ts-ignore\n          firstWine[field] <= secondWine[field] ? firstWine.id : secondWine.id;\n      } else {\n        winner =\n          // @ts-ignore\n          firstWine[field] >= secondWine[field] ? firstWine.id : secondWine.id;\n      }\n\n      if (id === winner) {\n        dispatch({\n          type: ActionTypeEnum.INCREMENT_SCORE\n        });\n        document.body.style.background = \"#39ff14\";\n        debouncedCallback();\n      } else {\n        setShowInfo(true);\n        dispatch({\n          type: ActionTypeEnum.RESET_SCORE\n        });\n        document.body.style.background = \"#FF073A\";\n        debouncedCallback();\n      }\n    } else if (\n      state.round.question &&\n      state.round.question.compare === CompareEnum.LESS\n    ) {\n      const field: string = state.round.question\n        ? state.round.question.field\n        : \"year\";\n      let winner: number;\n      console.log(field);\n      if (field === \"year\") {\n        winner =\n          // @ts-ignore\n          firstWine[field] >= secondWine[field] ? firstWine.id : secondWine.id;\n      } else {\n        winner =\n          // @ts-ignore\n          firstWine[field] <= secondWine[field] ? firstWine.id : secondWine.id;\n      }\n\n      if (id === winner) {\n        dispatch({\n          type: ActionTypeEnum.INCREMENT_SCORE\n        });\n        document.body.style.background = \"#39ff14\";\n        debouncedCallback();\n      } else {\n        setShowInfo(true);\n        dispatch({\n          type: ActionTypeEnum.RESET_SCORE\n        });\n        document.body.style.background = \"#FF073A\";\n        debouncedCallback();\n      }\n    }\n  }\n\n  return (\n    <div className=\"App\">\n      {state.round.question && <WineQuestion question={state.round.question} />}\n      <div className=\"quiz-counter\">\n        Your score: <span>{state.score}</span>\n      </div>\n      {Object.keys(state.wineList).length > 0 &&\n        state.round.players &&\n        state.round.players.length > 0 && (\n          <div className=\"quiz-section\">\n            <WineItem\n              showInfo={showInfo}\n              vintage={state.wineList[players.firstIndex]}\n              onClick={onClickHandle}\n            />\n            <h1>VS</h1>\n            <WineItem\n              showInfo={showInfo}\n              vintage={state.wineList[players.secondIndex]}\n              onClick={onClickHandle}\n            />\n          </div>\n        )}\n      {console.log(state)}\n      <Footer />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}